# Сервисы 

Сервисы отвечают за бизнес-логику и выполнение операций приложения. 

Они служат абстракцией для выполнения конкретных задач, таких как взаимодействие с базой данных, обработка данных и другие сложные операции. Ниже приведен пример простого сервиса с использованием Fastify и PostgreSQL:

```ts
// services/userService.ts
export const userService = {
  getAllUsers: async () => {
    const client = await pool.connect()
    try {
      const result = await client.query('SELECT * FROM users')
      return result.rows
    } finally {
      client.release()
    }
  },
}
```

### Памятка

##### Что должно быть:

- Бизнес-логика: Сервисы должны содержать бизнес-логику приложения. Это могут быть функции для обработки данных, взаимодействия с базой данных, выполнения сложных операций и тд.

- Абстракция от инфраструктуры: Сервисы должны предоставлять абстракцию от деталей инфраструктуры, таких как база данных или сторонние API.

- Модульность: Сервисы должны быть модульными и выполнять конкретные задачи. Их легко переиспользовать в разных частях приложения.

- Тестирование: Сервисы должны быть легко тестируемыми. Использование зависимостей и внедрение зависимостей помогают создать тестируемый код.

##### Чего быть не должно:
- Прямое взаимодействие с HTTP-запросами: Сервисы не должны напрямую обрабатывать HTTP-запросы или отдавать HTTP-ответы. Эта ответственность лежит на контроллерах (хендлерах).

- Смешивание ответственностей: Сервисы не должны содержать код, который не относится к их бизнес-логике. Например, код обработки HTTP-запросов или взаимодействия с пользовательским интерфейсом.
